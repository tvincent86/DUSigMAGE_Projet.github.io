<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Carte avec Leaflet</title>
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<style>
		body {
			padding: 0;
			margin: 0;
			background-color :#435a6b;
		}
		html, body {
			height: 100%;
		}
		#map {
			width:700px; 
			height:700px; 
			border:2px solid #bbb;
		}
	</style>
	
	<!--Leaflet-->
	<link rel="stylesheet" type="text/css" href="./lib/leaflet-0.7.3/leaflet.css" />
	<!--JS Leaflet-->
	<script src="./lib/leaflet-0.7.3/leaflet.js"></script>
	
	<!--Leaflet-Plugin-->
	
	<!--Leaflet.NavBar : https://github.com/davidchouse/Leaflet.NavBar-->
	<link rel="stylesheet" type="text/css" href="./lib/leaflet-plugin/NavBar/Leaflet.NavBar.css" />
	<script src="./lib/leaflet-plugin/NavBar/Leaflet.NavBar.js" type="text/javascript"></script>
	<!--Leaflet.MousePosition : https://github.com/ardhi/Leaflet.MousePosition-->
	<link rel="stylesheet" type="text/css" href="./lib/leaflet-plugin/MousePosition/L.Control.MousePosition.css" />
	<script src="./lib/leaflet-plugin/MousePosition/L.Control.MousePosition.js" type="text/javascript"></script>
	<!--Leaflet.MiniMap : https://github.com/Norkart/Leaflet-MiniMap-->
	<link rel="stylesheet" type="text/css" href="./lib/leaflet-plugin/MiniMap/Control.MiniMap.css" />
	<script src="./lib/leaflet-plugin/MiniMap/Control.MiniMap.js" type="text/javascript"></script>
	<!--Leaflet.ActiveLayers : https://github.com/vogdb/Leaflet.ActiveLayers-->
	<script src="./lib/leaflet-plugin/ActiveLayers/src/ActiveLayers.js"></script>
	<!--Leaflet.Ajax : https://github.com/calvinmetcalf/leaflet-ajax-->
	<script src="./lib/leaflet-plugin/LeafletAjax/leaflet.ajax.js"></script>
	
	<script>
		// Fonction qui contient l'aplicatino
		function init(){
			
			var map = new L.Map('map', {
				center: [46.11, -0.01],
				zoom: 8
			});
			
			// Création de la couche OSM
			var OpenStreetMap = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'});
			// Ajout de la couche OSM à la carte
			OpenStreetMap.addTo(map);
			
			// Couche communes
			var customCommunes = {
			    style: function(feature) {
			        return {
						color: 'blue',
						weight: 1,
						opacity: 0.5,
						
						pcolor: "#fff",
						popacity: 1,
						fill: 0,
						outline: 0
					};			        
			    }
			};
			var layerCommunes86 = new L.GeoJSON.AJAX('./data/communes86.geojson', customCommunes);       
			layerCommunes86.addTo(map);	
			
			//----------------------------
			// Control

			// Echelle
			L.control.scale({imperial: false}).addTo(map);
			
			// NavBar
			L.control.navbar({homeTitle : "Vue initiale"}).addTo(map);
			
			// Position de la souris
			L.control.mousePosition({position: 'bottomright', prefix: 'XY : ', separator: ' , ', emptyString: 'Position de la souris'}).addTo(map);
			
			// MiniMap
			var OpenStreetMap2 = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				minZoom: 6
			});
			var miniMap = new L.Control.MiniMap(OpenStreetMap2, { toggleDisplay: true }).addTo(map);
			
			// Selecteur de couche
			var baseLayers = {
			    'OpenStreetMap': OpenStreetMap
			};
			var overlayLayers = {
			};
			var control = L.control.activeLayers(baseLayers, overlayLayers).addTo(map)
		}
	</script>
  </head>
  <body onload="init()">
	  <div id="map"</div>
  </body>
</html>
